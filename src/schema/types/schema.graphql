extend type Query {
  allGroups: [Group!]!
  myAdminGroups: [Group!]
  group(groupId: ID!): Group
  groupExists(name: String!): Boolean!

  myGroupMemberships: [GroupMembership!]
  groupMembers(groupId: ID!): [GroupMembership!]
}

extend type Mutation {
  createGroup(input: CreateGroupInput!): Group
  updateGroup(input: UpdateGroupInput!): Group
  disableGroup(groupId: ID!): Group

  createMembership(input: CreateGroupMembershipInput!): GroupMembership
  updateMembershipRole(input: UpdateMembershipRoleInput!): GroupMembership
  updateMembershipStatus(input: UpdateMembershipStatusInput!): GroupMembership
  updateMembershipActive(input: UpdateMembershipActiveInput!): GroupMembership
  deleteMembership(membershipId: ID!): GroupMembership
}

########################
#  User extension
########################
extend type User @key(fields: "id") {
  id: ID! @external
  memberships: [GroupMembership!]!
}

########################
#  Group
########################
type Group @key(fields: "id") {
  id: ID!
  name: String!
  active: Boolean!
  members: [GroupMembership!]!
}

input CreateGroupInput {
  name: String!
  ownerId: ID!
}

input UpdateGroupInput {
  groupId: ID!
  name: String!
}

########################
#  GroupMembership
########################
type GroupMembership @key(fields: "id") {
  id: ID!
  group: Group!
  member: User!
  active: Boolean!
  role: MembershipRole!
  status: MembershipStatus!
}

enum MembershipStatus {
  APPROVED
  DENIED
  PENDING
}

enum MembershipRole {
  MEMBER
  TRADER
  ADMIN
}

input CreateGroupMembershipInput {
  groupId: ID!
  memberId: ID!
  role: MembershipRole!
  status: MembershipStatus!
}

input UpdateMembershipStatusInput {
  membershipId: ID!
  status: MembershipStatus!
}

input UpdateMembershipRoleInput {
  membershipId: ID!
  role: MembershipRole!
}

input UpdateMembershipActiveInput {
  membershipId: ID!
  active: Boolean!
}
