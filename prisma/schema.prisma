generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Group {
  createdAt   DateTime          @default(now())
  id          Int               @default(autoincrement()) @id
  name        String
  memberships GroupMembership[]
}

model GroupMembership {
  groupId  Int
  id       Int               @default(autoincrement()) @id
  memberId Int
  status   membership_status @default(PENDING)
  type     membership_type   @default(MEMBER)
  group    Group             @relation(fields: [groupId], references: [id])

  @@unique([memberId, groupId], name: "GroupMembership_memberId_groupId_key")
}

enum membership_status {
  APPROVED
  DENIED
  PENDING
}

enum membership_type {
  MEMBER
  OWNER
}
